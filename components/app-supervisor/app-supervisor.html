<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-scaffold/core-scaffold.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/core-menu/core-submenu.html">
<link rel="import" href="../../bower_components/core-item/core-item.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"  href="../../bower_components/google-map/google-map.html">

<polymer-element name="app-supervisor">
  <template>
    <style>
      paper-tabs {
        height: 64px;
      }
      .bottom {
        position: fixed;
        z-index: 1000;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
    <core-scaffold>
      <core-header-panel navigation flex mode="seamed">
        <core-toolbar>
          <paper-icon-button icon="arrow-back" onclick="window.location.href = './index.html'"></paper-icon-button>
          <paper-tabs selected="{{mode}}" fill>
            <paper-tab>
               <core-icon icon="create"></core-icon>
            </paper-tab>
            <paper-tab>
               <core-icon icon="toc"></core-icon>
            </paper-tab> 
            <paper-tab>
               <core-icon icon="visibility"></core-icon>
            </paper-tab>
          </paper-tabs>
        </core-toolbar>
        <core-menu flex>
          <template if="{{mode == 0}}" repeat="{{deliveries}}">
            <core-submenu label="{{tw}}" icon="alarm">
               <template repeat="{{dels}}">
                 <core-item icon="account-circle" label="{{name}}" selected="{{sel}}" style="color: {{color}}"></core-item>
               </template>
            </core-submenu>
          </template>
          <template if="{{mode == 1}}" repeat="{{deliveries}}">
            <template repeat="{{dels}}">
              <template repeat="{{step in before}}">
                <core-item icon="trending-down" label="{{step}}"></core-item>
              </template>
              <core-item icon="account-circle" label="{{name}}" selected="{{sel}}" style="color: {{lateColor}}"></core-item>
              <template repeat="{{step in after}}">
                <core-item icon="trending-down" label="{{step}}"></core-item>
              </template>
            </template>
          </template>
        </core-menu>
        <core-toolbar class="bottom">
          <div>toolbar</div>
        </core-toolbar>
      </core-header-panel>
      <div tool>
        Supervision
      </div>
      <div class="content">
        <google-map fit latitude="45.7600" longitude="4.8400" zoom="13">
          <template if="{{mode == 0}}" repeat="{{deliveries}}">
             <template repeat="{{dels}}">
               <google-map-marker latitude="{{lat}}" longitude="{{long}}" icon="http://maps.google.com/mapfiles/ms/icons/{{color}}-dot.png" title="{{name}}">
                 <p>{{name}}</p>
               </google-map-marker>
             </template>
          </template>
          <template if="{{mode == 1}}" repeat="{{deliveries}}">
             <template repeat="{{dels}}">
               <google-map-marker latitude="{{lat}}" longitude="{{long}}" icon="http://maps.google.com/mapfiles/ms/icons/{{lateColor}}-dot.png" title="{{name}}">
                 <p>{{name}}</p>
               </google-map-marker>
             </template>
          </template>
        </google-map>
      </div>
    </core-scaffold>
  </template>
  <script>
    Polymer({
        mode: 0,
        deliveries: [
          {
            tw: "08:00 - 10:00",
            dels: [
              {
                name: "LATAPY Remi",
                lat: "45.760828", long: "4.869021",
                color: "purple",
                lateColor: "green",
                before: [ "Warehouse", "turn at X" ],
                after: [ "continue on Y", "take Z" ]
              },
              {
                name: "RICARD Robin",
                lat: "45.770828", long: "4.869021",
                color: "purple",
                lateColor: "green",
                after: [ "u-turn on A", "left on B" ]
              }
            ],
          },
          {
            tw: "10:00 - 12:00",
            dels: [
              {
                name: "CISSE Modou",
                lat: "45.760828", long: "4.859021",
                color: "orange",
                lateColor: "green",
                after: [ "right on C" ]
              },
              {
                name: "OGER Edouard",
                lat: "45.750828", long: "4.849021",
                color: "orange",
                lateColor: "green",
                after: [ "continue on D for 1km", "take E" ]
              }
            ],
          },
          {
            tw: "14:00 - 16:00",
            dels: [
              {
                name: "BRUNAT Romain",
                lat: "45.779070", long: "4.874000",
                color: "green",
                lateColor: "red",
                after: [ "zigzag in F" ]
              },
              {
                name: "SIVANANDAN Bruno",
                lat: "45.774828", long: "4.865121",
                color: "green",
                lateColor: "red",
                after: [ "jump over the wall", "Warehouse" ]
              }
            ],
          },
        ],
        roadmap: []
    });
  </script>
</polymer-element>
